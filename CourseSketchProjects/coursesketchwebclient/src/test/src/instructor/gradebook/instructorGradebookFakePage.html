<html>
<head>
<meta charset="utf-8">
<title>Command Methods test</title>
<!-- test Library -->
<link rel="import" href="/test/testUtilities/fakePage/fakePageInclude.html">
    <link rel="import"
          href="/test/testUtilities/fakePage/fakeTestData/fakeTestDataInclude.html">
    <script src="/test/testUtilities/databaseHelper.js"></script>

<!-- files needed for testing -->
<link rel="import" href="/src/instructor/gradebook/instructorGradebook.html" data-fake>

</head>
<body>
<script>
    CourseSketch.dataManager.waitForDatabase(function() {
        CourseSketch.dataManager.addState('gradebookCourseid', 'courseId');
        var assignmentList = ["long", "fake2", "Test", 'test1.5', 'test2', 'quiz1', 'quiz2', 'quiz3',
            'hw1', 'hw2', 'project1', 'project2', 'hw3'];
        var studentList = ["student1", "stud2", "gilbert", "gabby", "student5", "student6",
        "matt", "stud8", "stud9", "stud10"];
        CourseSketch.dataManager.getCourse = function(courseId, callback) {
            CourseSketch.fakeCourses[0].assignmentList = assignmentList;
            callback(CourseSketch.fakeCourses[0]);
        };

        CourseSketch.dataManager.getAllAssignmentGrades = function(courseId, callback) {
            var gradeList = [];
            var grade = CourseSketch.PROTOBUF_UTIL.ProtoGrade();
            grade.courseId = courseId;
            grade.userId = studentList[0];
            grade.assignmentId = assignmentList[0];
            grade.currentGrade = 70;
            gradeList.push(grade);

            var grade = CourseSketch.PROTOBUF_UTIL.ProtoGrade();
            grade.courseId = courseId;
            grade.userId = studentList[1];
            grade.assignmentId = assignmentList[0];
            grade.currentGrade = 99;
            gradeList.push(grade);

            var grade = CourseSketch.PROTOBUF_UTIL.ProtoGrade();
            grade.courseId = courseId;
            grade.userId = studentList[3];
            grade.assignmentId = assignmentList[0];
            grade.currentGrade = 105;
            gradeList.push(grade);

            var grade = CourseSketch.PROTOBUF_UTIL.ProtoGrade();
            grade.courseId = courseId;
            grade.userId = studentList[0];
            grade.assignmentId = assignmentList[1];
            grade.currentGrade = 80;
            gradeList.push(grade);

            var grade = CourseSketch.PROTOBUF_UTIL.ProtoGrade();
            grade.courseId = courseId;
            grade.userId = studentList[1];
            grade.assignmentId = assignmentList[1];
            grade.currentGrade = 50;
            gradeList.push(grade);

            var grade = CourseSketch.PROTOBUF_UTIL.ProtoGrade();
            grade.courseId = courseId;
            grade.userId = studentList[2];
            grade.assignmentId = assignmentList[1];
            grade.currentGrade = 98;
            gradeList.push(grade);

            var grade = CourseSketch.PROTOBUF_UTIL.ProtoGrade();
            grade.courseId = courseId;
            grade.userId = studentList[1];
            grade.assignmentId = assignmentList[2];
            grade.currentGrade = 95;
            gradeList.push(grade);

            for (var i = 4; i < studentList.length; i++) {
                for (var j = 0; j < assignmentList.length; j++) {
                    var grade = CourseSketch.PROTOBUF_UTIL.ProtoGrade();
                    grade.courseId = courseId;
                    grade.userId = studentList[i];
                    grade.assignmentId = assignmentList[j];
                    grade.currentGrade = Math.random() * 100;
                    gradeList.push(grade);
                }
            }

            callback(gradeList);
        };
    });
</script>
</body>
